## git

### 网站 github

托管代码 免费服务器 查看开源项目

### 使用本地的 git 工具操作 github

#### 网上创建好了有内容的仓库,本地去更新

- 将远端的仓库克隆到本地使用 `git clone 地址`命令
- 远端地址分为两种 1. http 地址 2. ssh 地址
- 在克隆好的项目中更新一个 index.html
- 将做好的更新提交到远端 **进入到仓库打开命令行执行**`git add.`将对仓库的修改让远端记录 . 表示所有更改,可以换成文件名
- 执行`git commit -m'更新信息'` 更新信息指的就是这次的更新标题,将已经记录的修改制作成一个版本并添加版本留言。
- 第一次执行这个命令会失败, 会提示 please tell me who you are?...
- 按照提示告诉远端你是谁 1.执行 `git config--global user.email "你的邮箱"` 2.执行 `git config--global user.name "你的名称"`
- 重新执行 `git commit -m'更新信息'` 命令
- 执行`git push`命令,弹出用户密码弹窗,输入正确的用户名密码
- 如果再次更细的话直接执行 git 三步 add commit 和 push 即可

#### 2.网上创好空仓库，将本地的项目更新到网上

- 网上创建空仓库，仓库名最好与本地的项目相同
- 准备好本地项目
- 在本地的项目根目录内打开命令行工具，将本地的项目制作成 git 仓库执行`git init`
- 初始化空仓库之后，将本地项目所有修改让远端记录 执行 `git add .`
- 将此次记录制作成版本 执行 `git commit -m'fisrt commit'`
- 将分支强制重命名成 main 默认创建的叫 master 执行 `git branch -M main`
- 由于本地的仓库没有远端的地址,所以需要添加一个远端地址执行 `git remote add origin 我的仓库地址`
- 将本地的内容提交到远端，由于是第一次和远端交互，提交的时候需要带 地址 和分支，执行`git push -u origin main`

#### 添加 ssh 密钥

- 在任意位置打开命令行工具， 执行`ssh-keygen` 创建密钥，会生成公钥和私钥。
- 在默认生成密钥的位置，找到公钥 依次执行`cd ~/.ssh`和`cat id_rsa.pub`
  执行完`cat id_rsa.pub`复制命令内容，打开 github
- 去 github 网站新建一个 ssh,每一个系统有一个 ssh 密钥
- 以后下载上传更新仓库直接可以使用 ssh 地址,就不需要输入密码了

#### 两个用户操作同一个仓库下的同一个分支 main

网上操作当成一个用户,本地的操作当成一个用户
情况一：

- 网上的小 a 同事,更新了自己的代码功能(和小 b 操作的不是同一个文件)
- 本地的小 b 工作做完了，也要更新自己的代码，但是小 b 提交(push)的时候失败了，提示远端包含本地不存在的工作，不允许提交。
  - 只要本地和远端地址不一致，就不允许上传。
- 需要将本地不存在的远端版本拉取下来 执行`git pull`因为网上的版本和本地的版本不冲突，会自动合并一个版本，弹出一个编辑器让你提交版本留言，不需要填写 直接按住 shiift + z + z 保存并退出。
- 然后直接执行 git push 上传更新小 b 的工作。并不需要 add commit 等。
  情况二：
- 网上的小 a 同事,对 index.html 进行更新,并上传
- 本地的小 b,工作做完了,也要更新自己的代码,也是修改了 index.html , 然后上传, 依然上传失败
- 也会提示远端存在本地不存在的版本, 需要执行`git pull` 拉取远端更新。但是这次 github 并不会自动帮你合并版本,而是需要你解决冲突之后, 自己制作合并之后的版本上传

#### git 分支

一个 git 仓库可以拥有多个分支，默认只有一个 main(主) 分支，所有的内容都是放在 main 分支下。

- 网上创建好 readme 仓库,使用 ssh 克隆到本地(其实就是克隆了 main 分支的内容)
- 在本地的仓库内打开命令行，创建一个新的分支 执行命令 `git branch 分支名` ,这步操作只是在本地新建了一个分支，可以使用`git branch`查看本地仓库的所有分支，带星号的是当前所处的分支，创建好的内容，默认里面的内容和 当前所在分支 完全一样的。
- 使用`git checkout 分支名` 切换到对应的分支。
- 使用`git checkout -b 分支名` 新建分支并切换分支
- 在分支的文件夹下新增 index.html 并使用 git 三步上传，上传会失败，因为远端不存在新建的分支，需要使用`git push --set-upstream origin 分支名` 上传

### 特殊的分支 gh-pages,是 github 提供的免费服务器

- 当新建的分支名是 gh-pages 的时候,这个分支下的所有内容都会部署在`用户名.github.io/仓库名`地址下,默认会访问 index.html

#### 分支的团队合作

个人一个分支
- 网上新建一个空仓库和本地项目重名
- 本地新建 vue 项目,删除.git 文件夹。
- vue 项目创建的时候自带.gitignore 文件 该文件是 git 忽略上传文件，该文件内所有内容都会被忽略上传。
- 进入到项目中打开命令行，制作成仓库并上传,创建多个分支，并上传。分支创建的时候不需要修改。
- 克隆好项目 npm i 下载完包
- 同事a切换到a分支,运行项目,并且开始执行任务。做完之后上传
- 同事b切换到b分支,运行项目,并且开始执行任务。做完之后上传。
- 工作做好了之后需要合并分支,也就是将ab分支的更新全部合并到main分支 执行`git merge分支名`将对应分支的修改合并 main分支，然后直接执行`git push`将合并好的更新提交到网上。
- 有些时候merge合并会失败,提示你解决冲突然后做版本上传

上面的分支操作流程 a 和b 彼此不知道做了哪些更新(不是很好)
- 当a 开始工作的时候，需要知道整个项目的进度，那就需要拉取 main 的更新 切换到a 分支，执行`git pull origin main` 到本地

开始工作之前,先要知道整个项目进度
- 网上新建一个空仓库和木地项目重名
- 本地新建vue项目,删除.git文件夹
- vue项目创建的时候自带.gitignore文件,该文件是git忽略上传文件。该文件内写的所有内容都会被忽略上传。
- 进入到项目中打开命令行,制作成仓库并上传。创建多个分支,并上传。分支创建的时候不要做修改。
- 同事a切换到aaa分支,运行项目,并且开始执行任务。做完之后上传
- 切到分支 main 合并 刚才 aaa 分支更新，然后上传。
- 切换到bbb分支,需要先拉取main的更新,然后开始工作,上传更新bbb分支。
- 切换到main分支,合并bbb分支的更新,然后上传。